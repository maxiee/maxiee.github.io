{"template":"/home/maxiee/Code/Blog/maxiee.github.io/src/pages/post","sharedHashesByProp":{},"data":{"post":{"name":"在 React Native 中用 Flexbox 开发落地页(翻译)","desc":"如果你不熟悉 React Native 的 Flexbox 布局机制的话，编写 React Native 布局会十分痛苦。虽然你也可以用 JavaScript 写布局，但是理解和使用 Flexbox 布局是 React Native UI 开发的必备技能。在本文中，我们将使用 React Native 开发一个落地页。","type":"md","link":"ReactNativeFlexboxLandingmd","create":"2019-03-28","filename":"ReactNativeFlexboxLanding.md"},"content":"## 前言\n\n本文的原作者是[Holly Girouard](https://alligator.io/author/holly-girouard)，文章源链接为 [Building a Landing Page in React Native Using Flexbox](https://alligator.io/react/react-native-flexbox/)，我将其翻译成中文。\n\n如果你不熟悉 React Native 的 Flexbox 布局机制的话，编写 React Native 布局会十分痛苦。虽然你也可以用 JavaScript 写布局，但是理解和使用 Flexbox 布局是 React Native UI 开发的必备技能。在本文中，我们将使用 React Native 开发一个落地页。\n\n## 关于 Flexbox\n\n你很可能已经熟悉了 [CSS 中的 Flexbox 布局](https://alligator.io/css/flexbox-primer/)，React Native 的 Flexbox 实现跟它几乎是一样的。\n\nFlexbox 是一种高效强大的布局工具，专门用于构建用户界面，特别是移动界面。\n\n通过在组件的 style 中使用 `flex` 属性，我们可以根据可用的空间动态地放大和缩小。\n\n[React 中的 flex 属性](https://facebook.github.io/react-native/docs/layout-props#flex)与 CSS 的有一点不同，它的工作原理更像是 [CSS 中的 fr 单元](https://alligator.io/css/css-grid-layout-fr-unit/)，其中提供一个数值表示占据屏幕的空间比例。\n\n因此，在 React Native 中，flex 的取值是一个整数值。\n\n除了 flex 属性之外，另一点与 CSS 的不同是：在 React Native 的 Flexbox 中，`flex-direction` 默认值是 `column`。\n\n## 搞起\n\n在我们的实例项目汇总，我们要创建一个 AlligatorChef 🐊 落地页。\n\n项目完成后的最终结果如下：\n\n![](image/ReactNativeFlexboxLanding01.png)\n\n🐥如果你是 React Native 新手，可以先看我们的 [Getting Started with React Native and Expo](https://alligator.io/react/react-native-getting-started/) 再看本文。\n\n## 🚀 React Native 快速开始\n\n在命令行中输入下列命令创建一个新的 React Native 项目。进入新目录中，初始化项目，并输入 i 对应 iOS 平台：\n\n```\n$ create-react-native-app AlligatorChef\n$ cd AlligatorChef\n$ npm start\n$ i\n```\n\n## 现在我们有什么？\n\n在 **Create React Native App** 的初始化代码中，已经包含了一个 Flexbox 的示例，它在 StyleSheet.create 调用中使用 flex 属性。\n\n看一下 App.js 文件。似乎给了我们一个暗示，Flexbox 是在 React Native 中设置样式的关键:\n\n```js\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n```\n\n这告诉我们 container 应当拉伸到充满整个屏幕。\n\n## 下一步\n\n现在我们有了默认的项目，下一步对它做一些修改。\n\n首先创建两个 Text 元素用于标题。\n\n替换以下代码：\n\n```jsx\n<Text>Open up App.js to start working on your app!</Text>\n<Text>Changes you make will automatically reload.</Text>\n<Text>Shake your phone to open the developer menu.</Text>\n```\n\n替换为：\n\n```jsx\n<Text style={styles.h1}>AlligatorChef</Text>\n<Text style={styles.h2}>Providing cajun bacon recipes since 1987.</Text>\n```\n\n下面再在 StyleSheet 中添加一些样式。清空 StyleSheet 中的内容，替换为以下样式：\n\n```js\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'space-between',\n    backgroundColor: '#000',\n    alignItems: 'center',\n    width: '100%',\n  },\n  h1: {\n    color: '#008F68',\n    fontSize: 40,\n  },\n  h2: {\n    color: '#FAE042',\n    fontSize: 18,\n    marginTop: 8,\n  },\n});\n```\n\n现在看看修改之后的效果。\n\n我们将 [justifyContent](https://alligator.io/css/flexbox-primer/#justify-content) 从 `center` 改为 `space-between`。如果我们改回 `center`，所有元素都会再次居中。\n\n当使用 `justifyContent: 'space-between'`时，表示每个元素在屏幕的顶部与底部之间按照相同的间隔排布。\n\n这是为什么我们的 h1 跑到最顶上，h2 跑到最底下。\n\n## 图片和按钮\n\n我们继续来添加按钮和图片。\n\n将你现在的代码替换为下面代码，保留 styles 声明：\n\n```jsx\nimport React from 'react';\nimport { StyleSheet, Text, View, Button, Image } from 'react-native';\nimport Logo from './assets/chef.png';\n\nexport default class App extends React.Component {\n  render() {\n    return (\n      <View style={styles.container}>\n        <Text style={styles.h1}>AlligatorChef</Text>\n        <Text style={styles.h2}>Providing cajun bacon recipes since 1987.</Text>\n        <Image\n          source={Logo}\n          style={styles.image}\n        />\n        <Button\n          title=\"LET'S START\"\n          style={styles.button}\n          onPress={() => this.onPress()}\n          color=\"#fff\"\n        />\n      </View>\n    );\n  }\n}\n\n// ...\n```\n\n下面在根目录下创建一个 assets 目录。\n\n通常我们把图片放到 assets 目录下，这样项目中的所有组件都能很方便地获取到。\n\n添加一个你想用作 *AlligatorChef* 🐊 Logo 的图片到这个目录下。\n\nReact Native 对图片的处理有些奇怪，可能会给你带来问题。在我们的长讲下，确保你导入的是 png 图片。\n\n添加图片后，效果过下：\n\n![](image/ReactNativeFlexboxLanding02.png)\n\n这个效果不太好。\n\n## 布局样式\n\n现在界面中的元素都有了，但是展示效果不太好。我们来修复它。\n\n### React Native 中的图片需要一个尺寸\n\n作为 React Native 的一个最佳实践，我们总是给图片一个尺寸。\n\n如果你曾经遇到过图片没有展示出来的问题，先看看你有没有给图片指定尺寸。\n\n在上面的代码中可以看出，我们已经给图片指定了一个 style prop。在 StyleSheet 添加如下代码：\n\n```js\nimage: {\n  width: 300,\n  height: 260,\n  justifyContent: 'center',\n},\n```\n\n再次运行，会看到 Logo 的展示效果好多了！\n\n### 我的按钮看着不像按钮\n\nReact Native 中的按钮也很特别。\n\n它的按钮文字不是在 `<Button>` 和 `</Button>` 之间添加，而是使用一个 title prop 添加。\n\n下面我们继续给按钮添加一个 Style。\n\n首先，添加一个 class 为 buttonContainer 的 View：\n\n```jsx\n<View style={styles.buttonContainer}>\n  <Button\n    title=\"LET'S START\"\n    style={styles.button}\n    onPress={() => this.onPress()}\n    color=\"#fff\"\n  />\n</View>\n```\n\nstylesheet 的定义如下：\n\n```jsx\nbuttonContainer: {\n  backgroundColor: '#008F68',\n  borderRadius: 5,\n  padding: 8,\n  margin: 8,\n},\n```\n\n显示效果如下，现在看起来像按钮了：\n\n![](image/ReactNativeFlexboxLanding03.png)\n\n## 准备来点 Flexbox 吗?!\n\n现在我们通过使用神器的 Flexbox 让页面剩下的部分都变得可控。准备好了吗？🏀\n\n首先我们在最初的 container 下添加三个 container。\n\n将你的原始代码替换为下面代码，你将注意到几个新的类(`topContainer`, `middleContainer`, 和 `bottomContainer`)：\n\n```jsx\nimport React from \"react\";\nimport {\n  StyleSheet,\n  Text,\n  View,\n  Button,\n  Image,\n  ProgressViewIOS\n} from \"react-native\";\nimport Logo from \"./assets/chef.png\";\n\nexport default class App extends React.Component {\n  render() {\n    return (\n      <View style={styles.container}>\n        <View style={styles.topContainer}>\n          <Text style={styles.h1}>AlligatorChef</Text>\n          <Text style={styles.h2}>\n            Providing cajun bacon recipes since 1987.\n          </Text>\n        </View>\n        <View style={styles.middleContainer}>\n          <Image source={Logo} style={styles.image} />\n        </View>\n        <ProgressViewIOS number={1} />\n        <View style={styles.bottomContainer}>\n          <View style={styles.buttonContainer}>\n            <Button\n              title=\"LET'S START\"\n              style={styles.button}\n              onPress={() => this.onPress()}\n              color=\"#fff\"\n            />\n          </View>\n        </View>\n      </View>\n    );\n  }\n}\n```\n\n下面给我们的 StyleSheet 添加这些类：\n\n```js\ntopContainer: {\n  flex: 2,\n  justifyContent: 'center',\n  alignItems: 'center',\n},\nmiddleContainer: {\n  flex: 3,\n  justifyContent: 'flex-start',\n  alignItems: 'center',\n},\nbottomContainer: {\n  justifyContent: 'flex-end',\n  width: '90%',\n  margin: 20,\n  padding: 10,\n},\n```\n\n下面是见证奇迹的时刻：\n\n![](image/ReactNativeFlexboxLanding01.png)\n\n## 讨论一下 Flexbox 大救星\n\n我们给 topContainer 赋值了 `flex: 2`，赋予 flex-grow 值为 2，因此它占据原始 container 的 2/5 的空间。\n\n我们还告诉他将所有子元素 align 和 justify 到中心。\n\n在下图中给出一个可视的理解：\n\n![](image/ReactNativeFlexboxLanding03.png)\n\n我们给 middleContainer 赋值 `flex: 3`，表示它占据原始 container 3/5 的空间。\n\n我们没有用 `justifyContent: 'center'`，而是使用了 `justifyContent: 'flex-start'`。\n\n这样 *AlligatorChef* 会位于 middleContainer 的顶部位置：\n\n![](image/ReactNativeFlexboxLanding05.png)\n\n最后，因为我们不关心按钮占据的控件，因此就不需要给他设定 flex 值。我们只需要按钮位于页面的最底部，因此设置值 `bottomContainer` `justifyContent: 'flex-end'`。\n\n## 大功告成！\n\n本文只是一个大体介绍，Flexbox 布局模块不仅在 React Native 中很有用，在整个 Web 开发中都很有用。"},"path":"post/ReactNativeFlexboxLandingmd"}
