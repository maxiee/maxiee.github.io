{"template":"/home/maxiee/Code/Blog/maxiee.github.io/src/pages/post","sharedHashesByProp":{},"data":{"post":{"name":"React Native Reduxã€redux-persistã€immutable.js ç»“åˆå®è·µ","desc":"åœ¨æˆ‘çš„ React Native APP æ¶æ„ä¸­ï¼Œæˆ‘é€‰æ‹© Redux ä½œä¸ºçŠ¶æ€ç®¡ç†å™¨ã€‚åŒæ—¶æˆ‘ä½¿ç”¨ redux-persist è¿›è¡Œæ•°æ®æŒä¹…åŒ–ï¼Œä½¿ç”¨ immutable.js è¿›è¡Œ Redux çŠ¶æ€æ›´æ–°ã€‚æ‰€é‡åˆ°çš„é—®é¢˜æ˜¯è¿™ä¸¤è€…çš„å…¼å®¹ï¼Œéœ€è¦è¿›è¡Œé¢å¤–çš„è®¾ç½®ã€‚","type":"md","link":"ReduxPersistImmutablemd","create":"2019-04-12","filename":"ReduxPersistImmutable.md"},"content":"## å‰è¨€\n\nåœ¨æˆ‘çš„ React Native APP æ¶æ„ä¸­ï¼Œæˆ‘é€‰æ‹© Redux ä½œä¸ºçŠ¶æ€ç®¡ç†å™¨ã€‚åŒæ—¶æˆ‘ä½¿ç”¨ redux-persist è¿›è¡Œæ•°æ®æŒä¹…åŒ–ï¼Œä½¿ç”¨ immutable.js è¿›è¡Œ Redux çŠ¶æ€æ›´æ–°ã€‚æ‰€é‡åˆ°çš„é—®é¢˜æ˜¯è¿™ä¸¤è€…çš„å…¼å®¹ï¼Œéœ€è¦è¿›è¡Œé¢å¤–çš„è®¾ç½®ã€‚\n\nåœ¨æœ¬æ–‡ä¸­æˆ‘ä»…è®°å½•å¯å·¥ä½œçš„æ“ä½œè¿‡ç¨‹ï¼Œå…¶èƒŒåçš„åŸç†è¿˜éœ€è¦æœªæ¥è¿›ä¸€æ­¥ç ”ç©¶ã€‚\n\né¦–å…ˆæ‰€éœ€è¦çš„åº“å¦‚ä¸‹ï¼Œé€šè¿‡ npm æˆ–è€… yarn è¿›è¡Œå®‰è£…ï¼š\n\n- immutable\n- redux\n- redux-immutable\n- redux-persist\n- redux-persist-transform-immutable\n- redux-thunkï¼šå¦‚æœä½ ç”¨åˆ°å¼‚æ­¥æ¶ˆæ¯çš„è¯\n\nredux-persist ä¸ immutable.js ä¸å…¼å®¹çš„å…³é”®åœ¨äºå‰è€…æ— æ³•ç†è§£åè€…æ‰€ç‰¹æœ‰çš„æ•°æ®ç»“æ„ã€‚\n\nè€Œ redux-persist-transform-immutable è¿™ä¸ªåº“å°±æ˜¯åˆ©ç”¨äº† redux-persist çš„ transformer æœºåˆ¶ï¼ŒæŠ¹å¹³äº†è¿™ä¸ªé—®é¢˜ã€‚\n\nå› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦æ­£ç¡®è®¾ç½®ï¼Œå°±èƒ½è®©ä»–ä»¬æ­£å¸¸è¿è½¬èµ·æ¥ã€‚\n\nåœ¨è¿™é‡Œä¸å¾—ä¸æ„Ÿæ…¨ Redux ç”Ÿæ€çš„æ¶æ„åˆç†æ€§ï¼Œä¸åœ¨äºä»£ç é‡çš„å¤šå°‘ï¼Œå…³é”®åœ¨äºæ˜¯å¦æƒ³æ˜ç™½ã€æƒ³é€å½»ï¼Œæœ‰æ—¶å€™æœ€å¥½çš„è§£å†³æ–¹æ¡ˆçš„ä»£ç å…¶å®å¾ˆå°‘ã€‚\n\n## Redux Store\n\nä»¥ä¸‹æ˜¯æˆ‘çš„ Redux Store çš„è®¾ç½®è¿‡ç¨‹ï¼Œæˆ‘å°†æ³¨æ„ç‚¹éƒ½å†™åœ¨æ³¨é‡Šå½“ä¸­ï¼š\n\n```js\n// Redux çš„æ­£å¸¸ç”¨æ³•\nimport { createStore, applyMiddleware, combineReducers } from \"redux\";\nimport WeightReducer from '../bots/Weight/redux/WeightReducer';\nimport thunk from \"redux-thunk\";\n// redux-persist çš„æ­£å¸¸ç”¨æ³•\nimport { persistStore, persistReducer } from 'redux-persist';\nimport { AsyncStorage } from 'react-native';\n// å¯¼å…¥ transformer\nimport immutableTransform from 'redux-persist-transform-immutable';\nimport { createLogger } from 'redux-logger';\n\n// åˆ›å»º Reducer\nconst rootReducer = combineReducers({\n    // bots\n    WeightReducer\n    // services\n});\n\n// åˆ›å»ºæŒä¹…åŒ–è®¾ç½®\nconst persistConfig = {\n    transforms: [immutableTransform()], // é‡ç‚¹ï¼šé…ç½®ä¸Š immutableTransform\n    key: 'root',\n    storage: AsyncStorage\n}\n\n// redux-persist çš„æ­£å¸¸ç”¨æ³•\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\n\nconst middleWares = [];\nmiddleWares.push(thunk);\nconst loggerMiddleware = createLogger({\n    predicate: () => process.env.NODE_ENV === 'development',\n});\nmiddleWares.push(loggerMiddleware);\n\n// Redux çš„æ­£å¸¸ç”¨æ³•\nconst store = createStore(\n    persistedReducer,\n    applyMiddleware(...middleWares)\n);\n\n// redux-persist çš„æ­£å¸¸ç”¨æ³•\nexport const persistor = persistStore(store)\n\nexport default store;\n```\n\nå¤§åŠŸå‘Šæˆï¼æ˜¯ä¸æ˜¯å¾ˆç®€å• ğŸ˜†"},"path":"post/ReduxPersistImmutablemd"}
