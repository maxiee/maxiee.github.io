{"template":"/home/maxiee/Code/Blog/maxiee.github.io/src/pages/post","sharedHashesByProp":{},"data":{"post":{"name":"React Native Bundle æ‡’åŠ è½½(ç¿»è¯‘)","desc":"åœ¨æœ¬æ–‡ä¸­å°†å®ç° React Native çš„ Bundle æ‡’åŠ è½½æŠ€æœ¯ï¼Œä¼šæ·±å…¥ Metro å’Œ React Native iOS ä»£ç åº“çš„å†…éƒ¨å®ç°ã€‚è¿™ç¯‡å…³äºæ‡’åŠ è½½çš„æ–‡ç« å†™å¾—éå¸¸å¥½ï¼Œå¼ºçƒˆæ¨èï¼","type":"md","link":"ReactNativeLazyBundleLoadingmd","create":"2019-04-03","filename":"ReactNativeLazyBundleLoading.md"},"content":"## å‰è¨€\n\næœ¬æ–‡çš„åŸä½œè€…æ˜¯ [Karan Thakkar](https://medium.com/@karanjthakkar)ï¼Œæ–‡ç« æºé“¾æ¥ [Lazy Bundle Loading in React Native ğŸ”¥](https://medium.com/react-native-training/lazy-bundle-loading-in-react-native-5f717b65482a)ï¼Œæˆ‘å°†å…¶ç¿»è¯‘æˆä¸­æ–‡ã€‚\n\nåœ¨æœ¬æ–‡ä¸­å°†å®ç° React Native çš„ Bundle æ‡’åŠ è½½æŠ€æœ¯ï¼Œä¼šæ·±å…¥ Metro å’Œ React Native iOS ä»£ç åº“çš„å†…éƒ¨å®ç°ã€‚\n\nåŒ…æ‡’åŠ è½½æŠ€æœ¯ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªéš¾ç‚¹ï¼š\n\n- å¦‚ä½•æ ¹æ®å±å¹•è¿›è¡Œ React Native Bundle åˆ‡åˆ†\n- è·Ÿè¸ªä»£ç æ‰§è¡Œè¿‡ç¨‹ï¼Œæ‰¾å‡º [JavascriptCore](https://facebook.github.io/react-native/docs/javascript-environment) ä¸­åŠ è½½æ‰§è¡Œ Bundle çš„ä»£ç ï¼Œå°†å®ƒå¤åˆ¶å‡ºæ¥\n- æ‹¦æˆª React Native å®ç°æ‡’åŠ è½½ï¼Œåœ¨è·³è½¬åˆ°è¿™ä¸ªé¡µé¢çš„æ—¶å€™å†åŠ è½½ JavaScript Bundle\n\n## ä½¿ç”¨ Metro è¿›è¡Œ Code Splitting\n\nMetro æœ¬èº«æ²¡æœ‰è‡ªå¸¦åƒ Webpack çš„ [CommonsChunkPlugin](https://webpack.js.org/plugins/commons-chunk-plugin/) é‚£æ ·çš„é€šè¿‡åŠ¨æ€ import çš„åŒ…åˆ‡åˆ†æœºåˆ¶ã€‚\n\næœ‰ä¸€ä¸ªå« [Haul](https://github.com/callstack/haul) åŸºäº Webpack çš„ React Native æ‰“åŒ…å™¨èƒ½åšè¿™ä¸ªäº‹æƒ…ï¼Œä½†æ˜¯åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬ä¸æ‰“ç®—åˆ‡æ¢æ‰“åŒ…å™¨ï¼Œè€Œæ˜¯ä»ä½¿ç”¨ Metroã€‚\n\nåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™ä¸¤ä¸ªå¾ˆç®€å•çš„å±å¹•ç•Œé¢ï¼Œå…ˆè¯•å›¾æ‰‹åŠ¨åˆ‡åˆ† Bundleã€‚\n\né¡¹ç›®çš„å…¥å£æ–‡ä»¶æ˜¯ index.jsï¼Œæˆ‘åˆ›å»ºäº†ä¸¤ä¸ªç‰ˆæœ¬ï¼š\n\n1. ç‰ˆæœ¬ä¸€ï¼šBundle ä¸­åªæœ‰å±å¹• A\n\n2. ç‰ˆæœ¬äºŒï¼šBundle ä¸­æœ‰å±å¹• A å’Œå±å¹• B\n\nè¿™æ ·ï¼Œæˆ‘ä»¬é€šè¿‡æ‰‹åŠ¨ diff æœ€ç»ˆçš„ bundleï¼Œå°±èƒ½å¾—åˆ°å±å¹• B çš„ä»£ç ã€‚\n\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸¤ä¸ªç‰ˆæœ¬çš„ä»£ç ï¼š\n\nç‰ˆæœ¬ä¸€ï¼š\n\n![](image/ReactNativeLazyBundleLoading01.png)\n\nç‰ˆæœ¬äºŒï¼š\n\n![](image/ReactNativeLazyBundleLoading02.png)\n\næˆ‘è¯•ç”¨è¿™ä¸¤ä¸ªç‰ˆæœ¬çš„å…¥å£æ–‡ä»¶é€šè¿‡ä¸‹é¢çš„æ‰“åŒ…å‘½ä»¤åˆ†åˆ«æ‰“å‡ºä¸¤ä¸ª Bundle æ¥ï¼š\n\n```\nreact-native bundle \\\n        --platform ios \\\n        --entry-file index.js \\\n        --bundle-output ./ios/main.jsbundle\n```\n\nä¸‹é¢æˆ‘ä½¿ç”¨åŠŸèƒ½ diff å·¥å…·(å¦‚ [DiffMerge](https://sourcegear.com/diffmerge/)) å¯¹ä¸¤ä¸ª Bundle è¿›è¡Œ diff æ¯”è¾ƒï¼Œä¼šå¾—å‡ºè®¸å¤šå·®å¼‚ã€‚\n\næˆ‘ä»¬ä»ä¸Šå‘ä¸‹ä¸€å—ä¸€å—æ¥çœ‹ï¼Œé¦–å…ˆæ˜¯ç¬¬ä¸€å—ï¼š\n\n![](image/ReactNativeLazyBundleLoading03.png)\n\nå…¶ä¸­ï¼š\n\n- å·¦è¾¹æ˜¯åªæœ‰å±å¹• A\n- å³è¾¹æ˜¯æœ‰å±å¹• A å’Œå±å¹• B\n\n- å³å›¾ä¸­çº¢è‰²éƒ¨åˆ†æ˜¯å±å¹• B æ‰€å¤šå‡ºçš„éƒ¨åˆ†\n\n- index.js ç»è¿‡æ‰“åŒ…åå°±ä¼šå˜æˆè¿™æ ·ã€‚\n\nåœ¨ä¸Šé¢çš„ Diff ä¸­ï¼Œä¸»è¦åŒ…å«ä¸‰ä¸ªä¸åŒä¹‹å¤„ã€‚\n\n- ç¬¬ä¸€ä¸ªä¸åŒæ˜¯é¢å¤–çš„ ScreenB å¯¼å…¥ã€‚\n    - æ³¨æ„ `_dependencyMap` æ˜¯è¿™ä¸ªå‡½æ•°æ”¶åˆ°çš„æ¨¡å— ID çš„æ•°ç»„ã€‚æ‰€ä»¥ï¼š\n        - `_dependencyMap[0] = react-native`\n        - `_dependencyMap[1] = ScreenA`\n        - `_dependencyMap[2] = ScreenB`\n- ç¬¬äºŒä¸ªä¸åŒæ˜¯è°ƒç”¨ AppRegistry æ¥æ³¨å†Œ ScreenB\n\n- ç¬¬ä¸‰ä¸ªä¸åŒæ˜¯ Metro ç»™ ScreenB æ¨¡å—æŒ‡å®šçš„ ID æ˜¯ 354ï¼Œå°†è¿™ä¸ª ID ä¼ å…¥æ–¹æ³•\n\næ¯ä¸ª `__d(â€¦)` å‡½æ•°éƒ½è¡¨ç¤ºä½ çš„ React Native åº”ç”¨ä¸­çš„ä¸€ä¸ªæ–‡ä»¶/æ¨¡å—ã€‚\n\n- å®ƒçš„ç¬¬äºŒå‚æ•°ï¼šåœ¨æœ¬ä¾‹ä¸­ä¸º 0ï¼Œè¡¨ç¤º Metro ç»™æˆ‘ä»¬çš„ index.js çš„ id\n\nç¬¬äºŒå— diff å¦‚ä¸‹ï¼š\n\n![](image/ReactNativeLazyBundleLoading04.png)\n\nè¿™æ˜¯ ScreenB.js çš„ä»£ç ï¼Œå®ƒåœ¨æœ€ç»ˆçš„ Bundle ä¸­çš„æ¨¡å— id ä¸º 354ã€‚\n\nå› æ­¤ï¼Œå¦‚æœè¦åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ ScreenB åŒ…ï¼Œæˆ‘ä»¬éœ€è¦åšä¸¤ä»¶äº‹ï¼š\n\n**â‘  æ›´æ–° main.jsbundle**\n\n- åˆ é™¤ ScreenB çš„ import å’Œ registration\n- ä»ä¼ åˆ° ` __d(â€¦)` çš„ dependency map  ä¸­åˆ é™¤ ScreenB çš„æ¨¡å— idï¼Œ354\n- åˆ é™¤ç¼–è¯‘åçš„ module ä¸­åˆ é™¤ ScreenB.js çš„ä»£ç (ç¬¬äºŒå— diff)\n\n![](image/ReactNativeLazyBundleLoading05.png)\n\n**â‘¡ å°†ä»£ç è¿ç§»åˆ°æ–°æ–‡ä»¶â€”â€”ScreenB.jsbundle**\n\næˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ ` __d(â€¦)` æ¥è¿›è¡Œæ¨¡å—æ³¨å†Œã€‚\n\næˆ‘éœ€è¦åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„æ¨¡å— IDï¼Œæˆ‘é€‰æ‹©äº† 355ï¼Œå› ä¸º 354 æ˜¯ main.jsbundle ä¸­çš„æœ€åä¸€ä¸ªæ¨¡å— IDã€‚\n\nScreenB ç°åœ¨æ˜¯ dependencyMap æ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ä¸‰ä¸ªï¼Œå› æ­¤æˆ‘å°† `_dependencyMap[2]` æ”¹ä¸º `_dependencyMap[1]`ã€‚\n\nä¿®æ”¹åçš„ ScreenB.jsbundle ä¸­è¿™ä¸€éƒ¨åˆ†å¦‚ä¸‹ï¼š\n\n![](image/ReactNativeLazyBundleLoading06.png)\n\nç°åœ¨ ScreenB.jsbundle å‡ ä¹è¦å®Œæˆäº†ã€‚å®ƒå‘ Metro æ³¨å†Œäº†ä¸¤ä¸ªæ¨¡å—ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›åŒæ—¶ä¹Ÿæ¶ˆè´¹å®ƒã€‚\n\nè¿™å¯ä»¥å‚è€ƒ main.jsbundle æ¥çœ‹æ¶ˆè´¹æ˜¯æ€ä¹ˆå›äº‹ï¼š\n\n![](image/ReactNativeLazyBundleLoading07.png)\n\nåœ¨ main.jsbundle ä¸­ï¼ŒçœŸæ­£çš„å¼€å§‹å¤„æ˜¯æœ€åä¸€è¡Œçš„ `require(0)`ã€‚\n\nå®ƒä¼šè§¦å‘åº”ç”¨æ¥æ‰§è¡Œæ¨¡å— id ä¸º 0 çš„ä»£ç ï¼Œå³ React Native çš„å…¥å£æ–‡ä»¶ index.jsã€‚\n\nç”±äºæˆ‘ä»¬æŠŠ ScreenB çš„æ³¨å†Œç§»åŠ¨åˆ°ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è§¦å‘å®ƒæ‰§è¡Œï¼Œä»¥ä½¿ä»–æ³¨å†Œåˆ° React Native ä¸­ã€‚\n\nå› æ­¤æˆ‘ä»¬åœ¨ ScreenB.jsbundle çš„æœ€åä¸€è¡Œä¸­åŠ å…¥å¥ `require(355)`ã€‚\n\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![](image/ReactNativeLazyBundleLoading08.png)\n\nç°åœ¨æˆ‘ä»¬çš„åˆ†å‰²ä»»åŠ¡å°±å®Œæˆäº†ï¼ğŸŒŸ\n\n## åœ¨ React Native ä¸­æ‡’åŠ è½½å¹¶æ‰§è¡Œå·®åˆ†åŒ…\n\næ¯ä¸ª React Native APP éƒ½æ˜¯ä»åˆ›å»º RCTBridge å®ä¾‹å¼€å§‹çš„ã€‚\n\nå…¶ä¸­ï¼ŒReact Native åŠ è½½ JavaScriptï¼Œè¦ä¹ˆä»æœ¬åœ°æ‰“åŒ…å™¨(è°ƒè¯•æ¨¡å¼)ï¼Œè¦ä¹ˆä»é¢„ç¼–è¯‘çš„ Bundle(å‘å¸ƒæ¨¡å¼)\n\nï¼Œå¹¶ä¸”åœ¨ JavaScriptCore ä¸­è¿›è¡Œæ‰§è¡Œï¼š\n\n![](image/ReactNativeLazyBundleLoading09.png)\n\nå½“è°ƒç”¨ initWithBundleURL æ—¶ï¼Œä¼šæŒ‰é¡ºåºå‘ç”Ÿä»¥ä¸‹äº‹ä»¶ï¼š\n\n1. RCTBridge å®ä¾‹è¢«åˆ›å»ºï¼Œå¹¶ä¸” `_bundleURL` è¢«è®¾ä¸ºæˆ‘ä»¬çš„ä¼ å…¥å€¼â€”â€”[Code](https://github.com/facebook/react-native/blob/3c6a916536da67a4591f71883723c67a0c7be9d7/React/Base/RCTBridge.m#L196)\n2. å¯¹è±¡çš„ setUp æ–¹æ³•è¢«è°ƒç”¨ï¼Œå®ƒä¼šåˆå§‹åŒ– RCTCxxBridge (å³ batched bridge)â€”â€”[Code](https://github.com/facebook/react-native/blob/3c6a916536da67a4591f71883723c67a0c7be9d7/React/Base/RCTBridge.m#L316)\n\n3. batched bridge çš„ start æ–¹æ³•è¢«è°ƒç”¨â€”â€”[Code](https://github.com/facebook/react-native/blob/3c6a916536da67a4591f71883723c67a0c7be9d7/React/Base/RCTBridge.m#L317)\n4. è¿™æ˜¯ Bundle çœŸæ­£è¢«åŠ è½½å’Œæ‰§è¡Œçš„åœ°æ–¹â€”â€”[Code](https://github.com/facebook/react-native/blob/3c6a916536da67a4591f71883723c67a0c7be9d7/React/CxxBridge/RCTCxxBridge.mm#L358)\n\nå› æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„è‡ªå®šä¹‰åŠ è½½è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åšä¸¤ä»¶äº‹æƒ…ï¼š\n\n**â‘  è®¾ç½® Bridge æ¥åŠ è½½è‡ªå®šä¹‰ Bundle**\n\næˆ‘ä»¬éœ€è¦å°† `_bundleURL` æŒ‡å‘æˆ‘ä»¬çš„å·®åˆ†åŒ…ï¼šScreenB.jsbundleã€‚\n\nå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ RCTBridge.m ä¸­åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰æ–¹æ³•ï¼Œå¹¶åœ¨ RCTBridge.h ä¸­æš´éœ²å®ƒã€‚\n\nå¦‚æœæˆ‘ä»¬æƒ³åœ¨ç”¨æˆ·ä¸šåŠ¡ä»£ç ä¸­è°ƒåˆ°ï¼Œåªèƒ½è¿™ä¹ˆå¹²(æ”¹ React Native çš„åº•å±‚ä»£ç )ã€‚\n\næš´éœ²æ¥å£å¦‚ä¸‹ï¼š\n\n![](image/ReactNativeLazyBundleLoading10.png)\n\nä»£ç å®ç°å¦‚ä¸‹ï¼š\n\n![](image/ReactNativeLazyBundleLoading11.png)\n\nå…ˆä¸ç”¨æ‹…å¿ƒ loadCustomBundle ä¸­çš„è¿™ä¸ª lazyStartï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸‹æ–‡ä¸­å®ç°å®ƒã€‚ğŸ™‚\n\n**â‘¡ åŠ è½½å¹¶æ‰§è¡Œæ–° Bundle**\n\næˆ‘ä»¬å°† RCTCxxBridge.mm çš„ start æ–¹æ³•ä¸­åŠ è½½å’Œæ‰§è¡Œ JavaScript çš„é€»è¾‘å¤åˆ¶ä¸€ä»½åˆ°æˆ‘ä»¬çš„ loadCustomBundle æ–°æ–¹æ³•ä¸­ã€‚\n\nå…¶ä¸­ï¼Œstart æ–¹æ³•ä¸­åˆå§‹åŒ–äº†å¾ˆå¤šä¸œè¥¿ï¼Œå®ƒæœ€ç»ˆåšäº†ä¸‰ä»¶äº‹ï¼š\n\n1. åˆå§‹åŒ– bridge å¯¹è±¡ä»¥ä½¿å¾— Native åˆ° JS çš„é€šä¿¡æˆä¸ºå¯èƒ½â€”â€”[Code](https://github.com/facebook/react-native/blob/3c6a916536da67a4591f71883723c67a0c7be9d7/React/CxxBridge/RCTCxxBridge.mm#L354)\n2. æ ¹æ® Bundle URL åŠ è½½ Bundleâ€”â€”[Code](https://github.com/facebook/react-native/blob/3c6a916536da67a4591f71883723c67a0c7be9d7/React/CxxBridge/RCTCxxBridge.mm#L361)\n3. ç”±äºä¸Šé¢è¿™äº›æ­¥éª¤éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œéœ€è¦ç­‰å¾…å®ƒä»¬å®Œæˆï¼Œè€…é€šè¿‡ä½¿ç”¨ [**dispatch_group_notify**](https://github.com/facebook/react-native/blob/3c6a916536da67a4591f71883723c67a0c7be9d7/React/CxxBridge/RCTCxxBridge.mm#L376) ï¼Œå½“å¼‚æ­¥è°ƒç”¨å®Œæˆåå®ƒä¼šè¢«è°ƒç”¨ã€‚ç„¶åï¼Œå®ƒä¼šä½¿ç”¨ç¬¬ä¸€æ­¥åˆ›å»ºçš„ bridge æ‰§è¡ŒåŠ è½½çš„ JavaScript Bundle Stringâ€”â€”[Code](https://github.com/facebook/react-native/blob/3c6a916536da67a4591f71883723c67a0c7be9d7/React/CxxBridge/RCTCxxBridge.mm#L379)\n\nåŸºäºè¿™äº›ï¼Œæˆ‘ä»¬çš„ lazyStart å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n![](image/ReactNativeLazyBundleLoading12.png)\n\nå…¶ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦åˆå§‹åŒ– bridge å¯¹è±¡ï¼Œå› ä¸ºå®ƒå·²ç»åœ¨é¦–æ¬¡åŠ è½½ Bundle æ—¶å®Œæˆäº†ã€‚\n\nåœ¨è¿™é‡Œæˆ‘ä»¬åªéœ€è¦åšä¸¤ä»¶äº‹ï¼š\n\n1. é€šè¿‡ loadSource åŠ è½½æ–°çš„ JavaScript Bundleã€‚è¿™ä¼šåœ¨å†…éƒ¨ä½¿ç”¨æˆ‘ä»¬åœ¨ loadCustomBundle æ–¹æ³•ä¸­è®¾ç½®çš„ bundleURL\n2. ä¸€æ—¦åŠ è½½å®Œæ¯•ï¼Œæˆ‘ä»¬æ‰§è¡Œ JavaScript Bundleï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¤šä¸ªå¼‚æ­¥è°ƒç”¨ï¼Œå› æ­¤ä¸éœ€è¦ä½¿ç”¨ `dispatch_group_notify`\n\nä¸‹é¢æˆ‘ä»¬éœ€è¦æš´éœ² RCTCxxBridge.mm ä¸­çš„è¿™ä¸ªæ–¹æ³•ï¼Œä½¿å¾—åœ¨ RCTBridge.m ä¸­ä¹Ÿèƒ½è°ƒç”¨ loadCustomBundleã€‚\n\næˆ‘ä»¬é€šè¿‡ä¿®æ”¹ RCTBridge+Private.h æ¥å£æ¥å®ç°ï¼š\n\n![](image/ReactNativeLazyBundleLoading13.png)\n\nä¸Šè¿°è¿™äº›æ”¹å˜å¯ä»¥é€šè¿‡ GitHub diff æ¥æŸ¥çœ‹ï¼š\n\n<https://github.com/karanjthakkar/react-native/compare/v0.56.0...rn_lazy_bundle_loading> ğŸ¤“\n\n## åœ¨ä¸šåŠ¡ä»£ç ä¸­è¿›è¡Œæ‡’åŠ è½½\n\nç°åœ¨æˆ‘ä»¬æ—¢æœ‰äº†å·®åˆ†åŒ…ï¼Œä¹Ÿæœ‰äº†åŠ è½½å®ƒçš„ä»£ç ï¼Œè¿˜éœ€è¦åšä¸¤ä»¶äº‹æƒ…å°†å®ƒä»¬å°è£…å®Œå–„ï¼š\n\n**â‘  å°† ScreenB.jsbundle æ·»åŠ åˆ° XCode çš„ bundle èµ„æºä¸‹**\n\nreact-native-cli é»˜è®¤åˆ›å»ºçš„ React Native é¡¹ç›®ä¼šæŠŠ main.jsbundle æ”¾åˆ° bundle èµ„æºç›®å½•ä¸‹ã€‚\n\nç”±äº ScreenB.jsbundle æ˜¯ä¸€ä¸ªéæ ‡å‡†çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸‹é¢é…ç½®è¿›è¡Œæ·»åŠ ï¼š\n\n![](image/ReactNativeLazyBundleLoading14.png)\n\n**â‘¡ ä½¿ç”¨ React Native bridge å®ä¾‹æ¥è§¦å‘æ‡’åŠ è½½**\n\nreact-native-cli é»˜è®¤åˆ›å»ºçš„ React Native é¡¹ç›®ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ RCTRootView çš„ initWithBundleURL æ—¶ä¼šåœ¨å†…éƒ¨åˆ›å»º RCTBridge å®ä¾‹ï¼š\n\n![](image/ReactNativeLazyBundleLoading15.png)\n\nåœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸­ï¼ŒloadCustomBundle åœ¨ RCTBridge èƒ½å¤Ÿè°ƒåˆ°ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦è¿™ä¸ªç±»çš„å®ä¾‹ã€‚\n\nä¸ºäº†å®ç°è¿™ä¸ªï¼Œæˆ‘ä»¬å°†ä¸Šé¢å®ç°åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š\n\n![](image/ReactNativeLazyBundleLoading16.png)\n\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼š\n\n- å…ˆåˆ›å»ºä¸€ä¸ª bridge å®ä¾‹\n- ä½¿ç”¨å®ƒåˆ›å»ºä¸€ä¸ª RCTRootView å®ä¾‹\n\næŒ‰ç…§è¿™ç§æ–¹å¼æˆ‘ä»¬æœ‰äº† bridgeï¼Œç°åœ¨ä½ å¯ä»¥ç”¨å®ƒåœ¨ä»»ä½•åœ°æ–¹åŠ è½½è‡ªå®šä¹‰çš„ Bundle äº†ï¼š\n\n ![](image/ReactNativeLazyBundleLoading17.png)\n\nå…¶ä¸­ï¼šåŠ è½½åç§°ä¸º ScreenB çš„ bundleï¼Œå³ ScreenB.jsbundle\n\nä½ å¯ä»¥å°† Bridge å­˜åˆ°ä¸€ä¸ªé™æ€ç±»çš„å±æ€§ä¸­ï¼Œä½œä¸ºä¸€ä¸ªå•ä¾‹ï¼Œåœ¨ä»»ä½•åœ°æ–¹è®¿é—®ã€‚æˆ–è€…ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¾èµ–æ³¨å…¥æŠ€æœ¯ã€‚\n\nå…³äºæœ¬æ–‡çš„æ›´åŠ å®Œæ•´è¯¦ç»†çš„ç¤ºä¾‹è¯·å‚è§ [Github](https://github.com/karanjthakkar/RNLazyBundleLoading)ã€‚\n\næ„Ÿè°¢å¤§å®¶ï¼ ğŸ‘‹ğŸ» åŸä½œè€…çš„ Twitter è´¦å·æ˜¯ [@geekykaran](https://twitter.com/geekykaran)ï¼Œå–œæ¬¢çš„è¯å¤§å®¶å¯ä»¥å»å…³æ³¨ä»–ã€‚ \n\n\n\n"},"path":"post/ReactNativeLazyBundleLoadingmd"}
