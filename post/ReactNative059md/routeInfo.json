{"template":"/home/maxiee/Code/Blog/maxiee.github.io/src/pages/post","sharedHashesByProp":{},"data":{"post":{"name":"React Native 0.59 ç‰ˆæœ¬å‘å¸ƒäº†","desc":"React Native çš„ 0.59 ç‰ˆæœ¬å‘å¸ƒäº†ï¼åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­æœ‰æ¥è‡ª 88 ä¸ªè´¡çŒ®è€…ä¸­çš„ 644 ä¸ªæäº¤(Maxiee æ³¨ï¼šå…¶ä¸­ä¸€ä¸ªæ˜¯æˆ‘æäº¤çš„~ï¼‰ã€‚React Hooksã€Android 64ä½ JSCã€æé«˜å¯åŠ¨é€Ÿåº¦ã€ç˜¦å†…æ ¸ã€CLI å¢å¼ºã€‚","type":"md","link":"ReactNative059md","create":"2019-04-09","filename":"ReactNative0.59.md"},"content":"## å‰è¨€\n\næœ¬æ–‡çš„åŸä½œè€…æ˜¯ [Ryan Turner](https://twitter.com/turnrye)ï¼Œæ–‡ç« æºé“¾æ¥ä¸º [Releasing React Native 0.59](https://facebook.github.io/react-native/blog/2019/03/12/releasing-react-native-059)ï¼Œæˆ‘å°†å…¶ç¿»è¯‘ä¸ºä¸­æ–‡ï¼Œå¹¶å¯¹éå…³é”®ä¿¡æ¯åšäº†ä¸€å®šçš„åˆ å‡ã€‚\n\nReact Native çš„ 0.59 ç‰ˆæœ¬å‘å¸ƒäº†ï¼åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­æœ‰æ¥è‡ª 88 ä¸ªè´¡çŒ®è€…ä¸­çš„ 644 ä¸ªæäº¤(Maxiee æ³¨ï¼šå…¶ä¸­ä¸€ä¸ªæ˜¯æˆ‘æäº¤çš„~ï¼‰ã€‚React Hooksã€Android 64ä½ JSCã€æé«˜å¯åŠ¨é€Ÿåº¦ã€ç˜¦å†…æ ¸ã€CLI å¢å¼ºã€‚\n\nè´¡çŒ®ä¸ä»…æ¥è‡ªæäº¤ï¼Œä¹Ÿæ¥è‡ªå…¶ä»–æ–¹å¼ï¼ŒåŒ…æ‹¬ç»´æŠ¤ issuesï¼Œå‚ä¸ç¤¾åŒºï¼Œæ•™æˆåˆ«äºº React Native ç­‰ç­‰ã€‚\n\nè¿™ä¸€ç‰ˆæœ¬å¸¦æ¥å¾ˆå¤šå¤§çš„æ”¹å˜ã€‚\n\n## ğŸ£ Hooks æ¥äº†\n\nåœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­å¸¦æ¥äº† React Hooksï¼Œå®ƒè®©ä½ åœ¨ç»„ä»¶é—´å¤ç”¨çŠ¶æ€ç›¸å…³çš„é€»è¾‘ã€‚\n\nå…³äº Hooks çš„èµ„æ–™å¾ˆå¤šï¼Œå¦‚æœä½ ä¹‹å‰æ²¡æœ‰å¬è¯´è¿‡ï¼Œå¯ä»¥çœ‹çœ‹è¿™äº›èµ„æºï¼š\n\n- [Introducing Hooks](https://reactjs.org/docs/hooks-intro.html)ï¼šä¸ºä»€ä¹ˆ React è¦æ·»åŠ  Hooks è¿™ç§æœºåˆ¶\n- [Hooks at a Glance](https://reactjs.org/docs/hooks-overview.html)ï¼šå¿«é€Ÿå¯¹å†…ç½® Hooks æœ‰ä¸€ä¸ªæ•´ä½“æ¦‚å¿µ\n- [Building Your Own Hooks](https://reactjs.org/docs/hooks-custom.html)ï¼šç¤ºèŒƒå¦‚ä½•é€šè¿‡è‡ªå®šä¹‰ Hooks è¿›è¡Œä»£ç å¤ç”¨\n- [Making Sense of React Hooks](https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889)ï¼šæœ‰äº† Hooks å¸¦æ¥çš„æ–°çš„å¯èƒ½æ€§\n- [useHooks.com](https://usehooks.com/)ï¼šç¤¾åŒºç»´æŠ¤çš„ Hooks ç”¨æ³•ç¤ºèŒƒä¸ Demo\n\nä¸€å®šè¦è‡ªå·±å†™ä¸ª Demo è¯•è¯•ï¼Œä½“éªŒä¸‹æ¿€åŠ¨äººå¿ƒçš„å¤ç”¨æ•ˆæœã€‚\n\n## ğŸ“±æ›´æ–°äº† JSCï¼Œå¸¦æ¥æ€§èƒ½æå‡å’Œ Android çš„ 64 ä½æ”¯æŒ\n\nReact Native ä½¿ç”¨ JSC ([JavaScriptCore](https://webkit.org/)) ä½œä¸º JS å¼•æ“ã€‚\n\nAndroid ä¸Šçš„ JSC å·²ç»æ˜¯å‡ å¹´å‰çš„äº†ï¼Œå¾ˆå¤šç°ä»£ JavaScript å®ƒéƒ½ä¸æ”¯æŒã€‚\n\næ›´å·®çš„æ˜¯ï¼Œå®ƒçš„æ€§èƒ½è·Ÿ iOS ä¸Šçš„ç°ä»£ JSC ç›¸æ¯”å·®å¾ˆå¤šã€‚\n\nåœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªé—®é¢˜å¾—åˆ°äº†æå¤§æ”¹å–„ã€‚\n\næ„Ÿè°¢æ¥è‡ª  [@DanielZlotin](https://github.com/danielzlotin), [@dulmandakh](https://github.com/dulmandakh), [@gengjiawen](https://github.com/gengjiawen), [@kmagiera](https://github.com/kmagiera) å’Œ [@kudo](https://github.com/kudo) çš„ç»™åŠ›æˆæœï¼Œå°† JSC ä»å‡ å¹´å‰çš„ç‰ˆæœ¬èµ¶ä¸Šæ¥äº†ã€‚\n\nè¿™å¸¦æ¥äº† 64 ä½æ”¯æŒã€ç°ä»£ JavaScript æ”¯æŒï¼Œä»¥åŠå·¨å¤§çš„æ€§èƒ½æå‡ [big performance improvements](https://github.com/react-native-community/jsc-android-buildscripts/tree/master/measure)ã€‚\n\nKudos å°†è¿™ä¸ªè¿‡ç¨‹å˜æˆäº†ä¸€ä¸ªå¯ç»´æŠ¤çš„è¿‡ç¨‹ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°åœ¨æœªæ¥å¼•å…¥ WebKit çš„å¢å¼ºï¼Œè¿˜è¦æ„Ÿè°¢ Software Mansion å’Œ Expoã€‚\n\n## ğŸ’¨ ä½¿ç”¨ inline requires æ›´å¿«çš„ APP å¯åŠ¨\n\næˆ‘ä»¬æƒ³é»˜è®¤å¸®åŠ©äººä»¬æé«˜ React Native çš„æ€§èƒ½ï¼Œå› æ­¤æˆ‘ä»¬æ­£åœ¨å°† Facebook å†…çš„ä¼˜åŒ–æ–¹å¼å¸¦åˆ°ç¤¾åŒºä¸­ã€‚\n\nåº”ç”¨åŠ è½½æŒ‰éœ€èµ„æºï¼Œé¿å…é™ä½å¯åŠ¨é€Ÿåº¦ã€‚è¿™ä¸ªç‰¹æ€§å« inline requiresï¼Œå®ƒè®© Metro è¾¨åˆ«æ‡’åŠ è½½çš„ç»„ä»¶ã€‚\n\nå±‚æ¬¡æ·±ä¸”ç»„ä»¶å¤šå˜çš„ APP å°†ä¼šæ„Ÿå—åˆ°æ˜æ˜¾çš„æå‡ã€‚\n\n![](image/ReactNative0.5901.png)\n\nåœ¨å°†å…¶ä½œä¸ºé»˜è®¤é€‰é¡¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¤¾åŒºå‘æˆ‘ä»¬åé¦ˆå®ƒçš„æ•ˆæœã€‚\n\nå½“ä½ å‡çº§åˆ° 0.59 åï¼Œä¼šæœ‰ä¸€ä¸ªæ–°çš„ metro.config.js é…ç½®æ–‡ä»¶ï¼Œå°†é€‰é¡¹è®¾ä¸º true è¿›è¡Œä½“éªŒï¼Œå¹¶å‘æˆ‘ä»¬[åé¦ˆæ•ˆæœ](https://twitter.com/hashtag/inline-requires)ã€‚\n\næ›´å¤šå…³äº inline requires è¯·å‚è§[æ–‡æ¡£](https://facebook.github.io/react-native/docs/0.56/performance#inline-requires)ï¼Œæ¥æµ‹è¯• APP çš„æ€§èƒ½ã€‚\n\n## ğŸš… ç˜¦å†…æ ¸æ­£åœ¨è¿›è¡Œä¸­\n\nReact Native æ˜¯ä¸€ä¸ªå¤§å‹çš„å¤æ‚é¡¹ç›®ï¼Œä»£ç ä»“åº“ä¹Ÿå¾ˆå¤æ‚ã€‚\n\nè¿™ä½¿å¾— React Native çš„ä»£ç éš¾ä»¥è®©è´¡çŒ®è€…å‚ä¸ï¼Œéš¾ä»¥æµ‹è¯•ï¼Œå¹¶ä¸”ä½œä¸ºå¼€å‘ä¾èµ–ä¹Ÿå¾ˆè‡ƒè‚¿ã€‚\n\n[ç˜¦å†…æ ¸](https://github.com/react-native-community/discussions-and-proposals/issues/6)æ˜¯æˆ‘ä»¬è§£å†³è¿™ä¸€é—®é¢˜çš„åŠªåŠ›ï¼Œé€šè¿‡å°†éƒ¨åˆ†ä»£ç åˆ†ç¦»åˆ°å•ç‹¬çš„åº“å½“ä¸­ï¼Œæ¥è·å¾—æ›´å¥½çš„å¯ç»´æŠ¤æ€§ã€‚\n\nåœ¨è¿‡å»å‡ ä¸ªç‰ˆæœ¬ä¸­å·²ç»å¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ­¥çš„åŠªåŠ›ï¼Œä½†æ˜¯[é‡è¦çš„](https://www.youtube.com/watch?v=FMLKb4or8yg)è¿˜åœ¨åé¢ã€‚\n\nä½ ä¼šæ³¨æ„åˆ°ä¸€äº›ç»„ä»¶è¢«å®˜æ–¹åºŸå¼ƒäº†ã€‚\n\nè¿™æ˜¯å¥½æ¶ˆæ¯ï¼Œå› ä¸ºç°åœ¨ä»–ä»¬éƒ½æœ‰äº†æ´»è·ƒçš„ç»´æŠ¤è€…ã€‚\n\nå¦‚æœçœ‹åˆ°è­¦å‘Šä¿¡æ¯ï¼Œè¯·è¿ç§»åˆ°æ–°çš„åº“ä¸­ï¼ŒReact Native åœ¨æœªæ¥ä¼šåˆ é™¤è¿™äº›ç»„ä»¶ã€‚\n\nä¸‹é¢æ˜¯è¦åºŸå¼ƒçš„ç»„ä»¶çš„åˆ—è¡¨ï¼š\n\n| ç»„ä»¶                 | åºŸå¼ƒç‰ˆæœ¬ | æ–°ä»“åº“                                                       |\n| -------------------- | -------- | ------------------------------------------------------------ |\n| **AsyncStorage**     | 0.59     | [@react-native-community/react-native-async-storage](https://github.com/react-native-community/react-native-async-storage) |\n| **ImageStore**       | 0.59     | [expo-file-system](https://github.com/expo/expo/tree/master/packages/expo-file-system) or [react-native-fs](https://github.com/itinance/react-native-fs) |\n| **MaskedViewIOS**    | 0.59     | [@react-native-community/react-native-masked-view](https://github.com/react-native-community/react-native-masked-view) |\n| **NetInfo**          | 0.59     | [@react-native-community/react-native-netinfo](https://github.com/react-native-community/react-native-netinfo) |\n| **Slider**           | 0.59     | [@react-native-community/react-native-slider](https://github.com/react-native-community/react-native-slider) |\n| **ViewPagerAndroid** | 0.59     | [@react-native-community/react-native-viewpager](https://github.com/react-native-community/react-native-viewpager) |\n\nåœ¨æ¥ä¸‹æ¥å‡ ä¸ªæœˆä¸­ï¼Œä¼šæœ‰æ›´å¤šç»„ä»¶ä»å†…æ ¸ä¸­åºŸå¼ƒï¼Œä»¥å®ç°ç˜¦å†…æ ¸ã€‚æˆ‘ä»¬éœ€è¦è¿™æ–¹é¢çš„å¸®åŠ©ï¼Œå‚è§ [lean core umbrella](https://github.com/facebook/react-native/issues/23313)ã€‚\n\n## ğŸ‘©ğŸ½â€ğŸ’» CLI å¢å¼º\n\nReact Native çš„å‘½ä»¤è¡Œå·¥å…·æ˜¯å¼€å‘è€…è¿›å…¥ç”Ÿæ€çš„å…¥å£ç‚¹ï¼Œä½†æ˜¯ç”±äºç¼ºä¹å®˜æ–¹æ”¯æŒï¼Œå¯¼è‡´é•¿æœŸå­˜åœ¨å¾ˆå¤šé—®é¢˜ã€‚\n\nCLI å·¥å…·è¢«è¿ç§»åˆ°ä¸€ä¸ª[æ–°é¡¹ç›®](https://github.com/react-native-community/react-native-cli)ï¼Œç”±ä¸€ç¾¤[ä¸“é—¨çš„ç»´æŠ¤è€…](https://blog.callstack.io/the-react-native-cli-has-a-new-home-79b63838f0e6)è¿›è¡Œç»´æŠ¤ï¼Œå¹¶å¸¦æ¥äº†å¾ˆå¤šæ–°ç‰¹æ€§ã€‚\n\nLog çš„æ ¼å¼å˜å¾—æ›´å¥½äº†ã€‚å‘½ä»¤çš„æ‰§è¡Œé€Ÿåº¦ä¹Ÿå˜å¿«äº†ã€‚\n\n## ğŸš€ å‡çº§åˆ° 0.59\n\næˆ‘ä»¬æ”¶åˆ°äº†å¤§å®¶å…³äº[å‡çº§è¿‡ç¨‹](https://github.com/react-native-community/discussions-and-proposals/issues/68)çš„åé¦ˆï¼Œä¼šåœ¨[æœªæ¥çš„ç‰ˆæœ¬](https://github.com/react-native-community/discussions-and-proposals/issues/64#issuecomment-444775432)ä¸­æ”¹å–„è¿™äº›ä½“éªŒã€‚\n\næˆ‘ä»¬å»ºè®®ä½¿ç”¨  [`rn-diff-purge`](https://github.com/react-native-community/rn-diff-purge) æ¥ç¡®è®¤ä½ å½“å‰çš„ RN ç‰ˆæœ¬ä¸ 0.59 æœ‰å“ªäº›å·®å¼‚ï¼Œå¹¶æ‰‹åŠ¨åº”ç”¨æ”¹åŠ¨ã€‚\n\nä¸€æ—¦å‡çº§åˆ° 0.59ï¼Œå°±å¯ä»¥ä½¿ç”¨æ–°çš„å¢å¼ºçš„ react-native upgrade å‘½ä»¤(åŸºäº [`rn-diff-purge`](https://github.com/react-native-community/rn-diff-purge))æ¥å‡åˆ° 0.60 ç”šè‡³æ›´æ–°çš„ç‰ˆæœ¬ã€‚\n\n## ğŸ”¨ ç ´åæ€§çš„å˜åŒ–\n\n0.59 çš„ Android ç‰ˆæœ¬è¿›è¡Œäº†æ¸…ç†ï¼Œä»¥éµå¾ª Google çš„æœ€æ–°å»ºè®®ï¼Œè¿™å¯¼è‡´å¯¹ç°æœ‰ APP ä¼šæœ‰ç ´åæ€§å˜åŒ–ã€‚\n\nè¿™ä¸ªé—®é¢˜ä¼šå¯¼è‡´ä¸€ä¸ªè¿è¡Œæ—¶å´©æºƒï¼Œå¹¶å¸¦æœ‰ä¸€ä¸ªæ¶ˆæ¯ï¼š\"You need to use a Theme.AppCompat theme (or descendant) with this activity\"ã€‚\n\næˆ‘ä»¬å»ºè®®ä½ æ›´æ–°é¡¹ç›®çš„ AndroidManifest.xml æ–‡ä»¶ï¼Œå¹¶ç¡®ä¿ android:theme çš„å€¼æ˜¯ä¸€ä¸ª AppCompat ä¸»é¢˜ï¼Œä¾‹å¦‚ `@style/Theme.AppCompat.Light.NoActionBar`ã€‚\n\nreact-native-git-upgrade å‘½ä»¤åœ¨ 0.59 ä¸­è¢«åˆ é™¤ï¼Œä¹‹åéƒ½ä½¿ç”¨æ”¹è¿›çš„ react-native upgrade å‘½ä»¤ã€‚\n\n## ğŸ¤— æ„Ÿè°¢\n\nå¤§é‡æ–°çš„è´¡çŒ®è€…å‚ä¸äº† [enabling generation of native code from flow types](https://github.com/facebook/react-native/issues/22990) å’Œ [resolving Xcode warnings](https://github.com/facebook/react-native/issues/22609)ï¼Œè¿™äº›æ˜¯å­¦ä¹  React Native å·¥ä½œæ–¹å¼çš„å¾ˆå¥½çš„æ–¹ï¼Œè´¡çŒ®ä¹Ÿæ˜¯éå¸¸æ£’ï¼è°¢è°¢ä½ ä»¬ã€‚\n\nchangelog è¯·å‚è§[è¿™é‡Œ](https://github.com/react-native-community/react-native-releases/blob/master/CHANGELOG.md)ã€‚0.59 æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬æœŸå¾…ä½ çš„ä½¿ç”¨ï¼"},"path":"post/ReactNative059md"}
