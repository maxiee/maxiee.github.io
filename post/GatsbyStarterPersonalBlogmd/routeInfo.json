{"template":"/home/maxiee/Code/Blog/maxiee.github.io/src/pages/post","sharedHashesByProp":{},"data":{"post":{"name":"gatsby-starter-personal-blog 初体验","desc":"使用 gatsby 搭建了个人博客","type":"md","link":"GatsbyStarterPersonalBlogmd","create":"2018-06-23","filename":"GatsbyStarterPersonalBlog.md"},"content":"## 介绍\n\n[gatsby-starter-personal-blog](https://github.com/greglobinski/gatsby-starter-personal-blog) 是一个设计精良的 Gatsby 博客主题。\n\n我在给 maxiee.github.io 挑选 Gatsby 博客主题时发现了它，并打算采用它。在本文中我记录了这个对主题的一些使用经验。\n\n## gatsby-plugin-algolia\n\n这个主题通过这个插件接入了一个外部的搜索服务。我不想要这个服务，因此干掉他。这样做的结果就是搜索功能不可用了。\n\n## 上传到 GitHub\n\n按照官网教程，通过 `gatsby new` 在本地创建了工程，下一步是将它关联到 GitHub 上。\n\n这一步参考文档 [How Gatsby Works with GitHub Pages](https://www.gatsbyjs.org/docs/how-gatsby-works-with-github-pages/)。\n\n## Cannot find module ‘../build/Release/sharp.node’\n\n还遇到一个崩溃问题。Sharp 库是一个 node 的图片处理库。\n\nGithub 上有一个 [issue](https://github.com/gatsbyjs/gatsby/issues/4693) 是专门说这个问题的。\n\n解决问题的方式是：\n\n> Had the same error. Deleting node_modules, .cache, public and reinstalling all dependencies fixed it for me.\n\n还真的管用了。。。🕯\n\n## UNHANDLED REJECTION\n\n在 gatsby-config.js 第一行添加：\n\n``` js\nconst autoprefixer = require('autoprefixer');\n```\n\n对这些错误目前都是知其然不知其所以然的懵逼状态。\n\n## gatsby-plugin-google-analytics\n\n这个是 Google 统计的插件，文档在[这里](https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-google-analytics)。\n\n遇到了一个问题：跟踪没有生效，原因是浏览器有缓存，缓存住了老的代码，新页面代码没有生效。\n\n## react-adsense\n\n项目主页位于[这里](http://git.hust.cc/react-adsense/)。\n\n遇到一点小问题：需要在网页中加入：\n\n```js\n<script async src=\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"></script>\n```\n\n由于主页的模板是使用 JSX，导入方法为，在 gatsby-ssr.js 中添加：\n\n```js\n(function(d) {\n    var wfAD = d.createElement('script'), sAD = d.scripts[0];\n    wfAD.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';\n    wfAD.async = true;\n    sAD.parentNode.insertBefore(wfAD, sAD);\n})(document);\n```"},"path":"post/GatsbyStarterPersonalBlogmd"}
