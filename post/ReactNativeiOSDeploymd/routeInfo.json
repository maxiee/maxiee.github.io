{"template":"/home/maxiee/Code/Blog/maxiee.github.io/src/pages/post","sharedHashesByProp":{},"data":{"post":{"name":"React Native - 构建 AppStore 发布的 iOS APP（翻译）","desc":"将一个 React Native APP 发布到 iOS AppStore 上，需要一些额外步骤，将在本文中进行说明。","type":"md","link":"ReactNativeiOSDeploymd","create":"2019-03-05","filename":"ReactNativeiOSDeploy.md"},"content":"## 前言\n\n本文的作者是[Christian Engvall](https://www.christianengvall.se/)，文章源链接[React Native - Build for iOS App store deploy](https://www.christianengvall.se/react-native-build-for-ios-app-store/)，我将其翻译为中文。\n\n将一个 React Native APP 发布到 iOS AppStore 上，需要一些额外步骤。[Ray Wenderlich](https://www.raywenderlich.com/127936/submit-an-app-part-1) 上已经有了一篇完整的关于发布 APP 的教程（包括如何注册开发者账号、创建证书和 Profile），但是它不包含这些额外步骤。在完成 [Ray Wenderlich](https://www.raywenderlich.com/127936/submit-an-app-part-1) 教程中的步骤后，你需要继续阅读本文。\n\n## ① 从 info.plist 中删除 localhost\n\n首先我们要从 info.plist 中删除 localhost 例外。默认从 iOS 9 开始，由于 App Transport Security 所有的 HTTP 流量都是被拒绝的。React Native 因此添加了一个 localhost 的例外供调试使用。\n\n打开 info.plist 展开 **App Transport Security settings** 和 **Exception Domains**。在下面能够找到 **localhost** 项，将其删除。\n\n![](image/ReactNativeiOSDeploy1.png)\n\n注：图片[原始链接](https://www.christianengvall.se/wp-content/uploads/2017/06/infoplist-app-transport-security-settings.png)\n\n## ② 创建一个 Release Scheme\n\n当构建 Release 版的 APP 时，React Native 的开发者菜单会被停用。\n\n![](image/ReactNativeiOSDeploy2.png)\n\n注：图片[原始链接](https://www.christianengvall.se/wp-content/uploads/2017/06/react-native-developer-menu.png)\n\n我们 APP 的 JavaScript 文件会被打包放入 APP 里，因此 APP 不需要连接电脑就行运行。\n\n进入 XCode 的 **Product -> Scheme -> Edit Scheme**，选择 **Run** 分页，下拉 Build Configuration 选择 Release。\n\n## ③ 使用 Release Scheme 构建 APP\n\n选择 XCode 的 **Product -> Build**，或者使用命令行进行构建：\n\n```\nreact-native run-ios --configuration Release\n```\n\n## ④ 文档\n\n想了解更多请参阅官方文档 [Running On Device](https://facebook.github.io/react-native/docs/running-on-device.html)。\n\n## 再说下 React native google maps\n\n如果你在 APP 中使用了 React native google maps，在构建用于发布到 AppStore 的 archive 是会遇到问题。\n\n我得到的错误说 “duplicate symbols for architecture…”。GitHub 上的小哥哥 se1exin 给出了这个问题的[解决方法](https://github.com/airbnb/react-native-maps/issues/718#issuecomment-295585410)。 \n\n## 相关链接\n\n- [React Native IOS After Build](https://stackoverflow.com/questions/47865689/react-native-ios-after-build)"},"path":"post/ReactNativeiOSDeploymd"}
